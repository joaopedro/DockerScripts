<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">
	
	<!-- STATIC LOCAL SYSTEM IDENTIFIER -->
	<!--  
	<bean id="localSystemIdentifier" class="com.sinfic.ipdms.domain.business.config.StaticLocalSystemIdentifier">
		<constructor-arg value="IPDMSID" />
	</bean>
	-->

	<!-- DATABASE SYSTEM IDENTIFIER -->
	<bean id="localSystemIdentifier" class="com.sinfic.ipdms.domain.business.config.DatabaseLocalSystemIdentifier">
		<constructor-arg ref="configEntryRepository" />
	</bean>
	
	<!-- Send Domain Object Proxy Parent Bean -->
	<bean abstract="true" id="sendObjectProxy" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
		<property name="serviceInterface" value="com.sinfic.ipdms.integration.ipdms.service.ReceiveObjectFromRemoteIPDMS" />
	</bean>


	<!-- ********************************************************************* -->  
	<!--  Interoperability Organica, Funcao                                    -->
	<!-- ********************************************************************* -->
	 
	<bean id="syncronizeFuncaoService" class="com.sinfic.ipdms.services.domain.organica.SyncronizeFuncaoServiceImpl">
		<constructor-arg ref="funcaoRepository" />
		<constructor-arg ref="sendFuncaoService" />
	</bean>

	<bean id="sendFuncaoService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>
				<!-- Example Node. Add more if needed -->
				<bean id="sendFuncaoProxyNo1" parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveFuncao" />
				</bean>
			</list>
		</constructor-arg>	
	</bean>

	<bean id="syncronizeOrganicaService" class="com.sinfic.ipdms.services.domain.organica.SyncronizeOrganicaServiceImpl">
		<constructor-arg ref="organicaRepository" />
		<constructor-arg ref="sendOrganicaService" />
	</bean>

	<bean id="sendOrganicaService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>
				<!-- Example Node. Add more if needed -->
				<bean id="sendOrganicaProxyNo12" parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node2.url}/remoting/ReceiveOrganica" />
				</bean>
				<bean id="sendOrganicaProxyNo1" parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveOrganica" />
				</bean>

			</list>
		</constructor-arg>
		<property name="objectManipulator">
			<bean class="com.sinfic.ipdms.services.domain.organica.TouchOrganicaLazyPropertiesManipulator" />
		</property>	
	</bean>
	
	
	<!-- ********************************************************************* -->  
	<!--  Interoperability Entidade Singular, Colectiva                        -->
	<!-- ********************************************************************* -->

	<bean id="syncronizeEntidadeService" class="com.sinfic.ipdms.modules.entidade.services.impl.SyncronizeEntidadesServiceImpl">
		<constructor-arg ref="sendEntidadeSingularService" index="0" />
		<constructor-arg ref="sendEntidadeColectivaService" index="1" />
		<constructor-arg ref="entidadeRepository" />
	</bean>

	<bean id="sendEntidadeSingularService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>	
				<!-- TODO: Add more if needed -->
				<bean parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveEntidadeSingular" />
				</bean>
			</list>
		</constructor-arg>
		<property name="objectManipulator">
			<bean class="com.sinfic.ipdms.modules.entidade.transformer.TouchEntidadeLazyPropertiesManipulator" />
		</property>
	</bean>
	
	<bean id="sendEntidadeColectivaService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>	
				<bean id="sendEntidadeColectivaProxyNo1" parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveEntidadeColectiva" />
				</bean>
			</list>
		</constructor-arg>
		<property name="objectManipulator">
			<bean class="com.sinfic.ipdms.modules.entidade.transformer.TouchEntidadeLazyPropertiesManipulator" />
		</property>
	</bean>
	
	<!-- ********************************************************************* -->  
	<!--  Interoperability ColaboradorInfo                                     -->
	<!-- ********************************************************************* -->
	
	<bean id="syncronizeColaboradorService" class="com.sinfic.ipdms.services.domain.colaborador.SyncronizeColaboradorServiceImpl">
		<constructor-arg ref="colaboradorExtendedRepository" />
		<constructor-arg ref="sendColaboradorService" />
		<property name="excludeLogins">
			<list>
				<value>iuser</value>
				<value>super</value>
			</list>
		</property>
	</bean>

	<bean id="sendColaboradorService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>
				<bean id="sendColaboradorProxyNo1" parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveColaborador" />
				</bean>
			</list>
		</constructor-arg>
		<property name="objectManipulator">
			<bean class="com.sinfic.ipdms.services.domain.colaborador.TouchColaboradorLazyPropertiesManipulator" />
		</property>	
	</bean>

	<!-- ********************************************************************* -->  
	<!--  Interoperability Dimensao                                            -->
	<!-- ********************************************************************* -->
	
	<bean id="syncronizeDimensaoAndValoresService" class="com.sinfic.ipdms.modules.dimensoes.services.SyncronizeDimensaoAndValoresServiceImpl">
		<constructor-arg ref="syncronizeDimensaoService"/>
		<constructor-arg ref="syncronizeValorDimensionalService"/>
	</bean>

	<bean id="syncronizeDimensaoService" class="com.sinfic.ipdms.modules.dimensoes.services.SyncronizeDimensaoServiceImpl">
		<constructor-arg ref="dimensaoRepository" />
		<constructor-arg ref="sendDimensaoService" />
	</bean>

	<bean id="sendDimensaoService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>
				<bean parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveDimensao" />
				</bean>
			</list>
		</constructor-arg>
		<property name="objectManipulator">
			<bean class="com.sinfic.ipdms.modules.dimensoes.services.TouchDimensaoLazyPropertiesManipulator" />
		</property>	
	</bean>

	<bean id="syncronizeValorDimensionalService" class="com.sinfic.ipdms.modules.dimensoes.services.SyncronizeValorDimensionalServiceImpl">
		<constructor-arg ref="valorDimensionalRepository" />
		<constructor-arg ref="sendValorDimensionalService" />		
	</bean>

	<bean id="sendValorDimensionalService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendObjectToRemoteIPDMSImpl">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<list>
				<bean parent="sendObjectProxy">
					<property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveValorDimensional" />
				</bean>
			</list>
		</constructor-arg>
		<property name="objectManipulator">
			<bean class="com.sinfic.ipdms.modules.dimensoes.services.TouchValorDimensionalLazyPropertiesManipulator" />
		</property>	
	</bean>		
	<!-- ********************************************************************* -->  
	<!--  Interoperability ServicoOnline                                       -->
	<!-- ********************************************************************* -->

	<bean id="sendProcessService" class="com.sinfic.ipdms.integration.ipdms.service.impl.SendProcessToAnotherIPDMSService">
		<constructor-arg ref="localSystemIdentifier" />
		<constructor-arg>
			<map>
<!-- 				<entry key="com.sinfic.ipdms.example.instrucao.TesteBean"> -->
<!-- 					<list> -->
<!-- 						<bean class="com.sinfic.ipdms.integration.ipdms.transformer.impl.TouchFlowBeanWithFilesManipulator"/> -->
<!-- 					</list> -->
<!-- 				</entry> -->
			</map>
		</constructor-arg>
		<constructor-arg>
			<map key-type="java.lang.String" value-type="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
				<entry key="ipdms1">
					<!-- Add more if needed -->
					<bean id="httpInvokerProxy" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
					    <property name="serviceUrl" value="${ipdms.node1.url}/remoting/ReceiveProcess"/>
					    <property name="serviceInterface" value="com.sinfic.ipdms.integration.ipdms.service.IReceiveProcessService"/>
					</bean>					
				</entry>
			</map>
		</constructor-arg>
	</bean>
</beans>
