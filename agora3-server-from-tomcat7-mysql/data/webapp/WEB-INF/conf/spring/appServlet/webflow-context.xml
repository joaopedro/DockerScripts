<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:webflow="http://www.springframework.org/schema/webflow-config"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/webflow-config
           http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd">

    <!-- Enables FlowHandlers -->
    <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
        <property name="flowExecutor" ref="flowExecutor"/>
    </bean>

    <!-- Executes flows: the entry point into the Spring Web Flow system -->
    <webflow:flow-executor id="flowExecutor"/>

    <!-- The registry of executable flow definitions -->
    <webflow:flow-registry id="flowRegistry"
                           flow-builder-services="flowBuilderServices">
        <webflow:flow-location-pattern value="/WEB-INF/webflows/*.xml"/>
    </webflow:flow-registry>

    <!-- Plugs in a custom creator for Web Flow views -->
    <webflow:flow-builder-services id="flowBuilderServices" view-factory-creator="mvcViewFactoryCreator" />

    <!-- Configures Web Flow to use Tiles to create views for rendering; Tiles allows for applying consistent layouts to your views -->
    <bean id="mvcViewFactoryCreator"
          class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
        <property name="viewResolvers" ref="viewResolver"/>
    </bean>



    <!--NEW UP OLD DOWN-->

	<bean id="flowHistoryListener" class="com.sinfic.ipdms.integration.spring.FlowExecutionHistoryListener" />

	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>
	<bean id="flowUtils" class="com.sinfic.ipdms.comum.util.FlowUtils" scope="singleton" />

	<bean id="dynamicFormAction" class="com.sinfic.ipdms.instrucao.action.DynamicFormAction" scope="singleton">
		<constructor-arg ref="dynamicFormInstanceRepository" />
		<constructor-arg ref="dynamicFormTemplateRepository" />
		<constructor-arg ref="dynamicInstanceFactory" />
		<constructor-arg  ref="dynamicFormPresentationService"/>
		<property name="servicoOnlineRepository" ref="servicoOnlineRepository" />
		<property name="pdfBarCodeService" ref="pdfBarCodeService" />
		<property name="pdfConverter" ref="pdfConverter" />
		<property name="numeroDocumentoAnexadoGenerator" ref="genericNumeroDocumentoGenerator" />
		<property name="numeroDocumentoItemGenerator" ref="genericNumeroDocumentoGenerator" />
		<property name="formObjectName" value="dynamic" />
		<property name="formObjectClass" value="com.sinfic.ipdms.instrucao.formbean.DynamicFlowBean" />
		<property name="formObjectScope" value="FLOW" />
		<property name="validator">
			<bean class="com.sinfic.ipdms.instrucao.validator.DynamicFormValidator" scope="singleton">
				<constructor-arg ref="dynamicValidatorHelper" />
				<constructor-arg ref="fileUploadProperties" />
			</bean>
		</property>
		<!-- <property name="esriConnector" ref="esriConnector"/> -->
	</bean>

	<bean id="defineDynamicFormFlow" class="com.sinfic.ipdms.modules.dynamicform.flow.DefineDynamicFormFlowAction" scope="singleton">
		<constructor-arg ref="dynamicFormTemplateRepository" />
		<constructor-arg ref="dynamicFormInstanceRepository" />
		<constructor-arg ref="dynamicFormPresentationService" />
		<property name="formObjectName" value="dynamicForm" />
		<property name="formObjectClass" value="com.sinfic.ipdms.modules.dynamicform.flow.DefineDynamicFormFlowBean" />
		<property name="formObjectScope" value="FLOW" />
		<property name="validator">
			<bean class="com.sinfic.ipdms.modules.dynamicform.flow.DefineDynamicFormValidator" scope="singleton">
				<constructor-arg ref="dynamicFormTemplateRepository" />
			</bean>
		</property>
	</bean>

	<bean id="gestaoAusenciasFormAction"
		class="com.sinfic.ipdms.gestaoausencias.action.GestaoAusenciasFormAction"
		scope="singleton" >
		<property name="pdfConverter" ref="pdfConverter" />
		<property name="formObjectName" value="gestaoAusenciasFlowBean" />
		<property name="formObjectClass" value="com.sinfic.ipdms.gestaoausencias.instrucao.GestaoAusenciasFlowBean" />
		<property name="formObjectScope" value="FLOW" />
		<property name="validator">
			<bean class="com.sinfic.ipdms.gestaoausencias.instrucao.GestaoAusenciasFlowValidator" abstract="false" scope="singleton">
				<constructor-arg ref="fileUploadProperties" />
			</bean>
		</property>
	</bean>

	<bean id="gestaoReclamacoesFormAction"
		class="com.sinfic.ipdms.gestaoreclamacoes.action.GestaoReclamacoesFormAction"
		scope="singleton" >
		<property name="pdfConverter" ref="pdfConverter" />
		<property name="formObjectName" value="gestaoReclamacoesFlowBean" />
		<property name="formObjectClass" value="com.sinfic.ipdms.gestaoreclamacoes.instrucao.GestaoReclamacoesFlowBean" />
		<property name="formObjectScope" value="FLOW" />
		<property name="validator">
			<bean class="com.sinfic.ipdms.gestaoreclamacoes.instrucao.GestaoReclamacoesFlowValidator" abstract="false" scope="singleton">
				<constructor-arg ref="fileUploadProperties" />
			</bean>
		</property>
	</bean>

	<bean id="gestaoSugestoesFormAction"
		class="com.sinfic.ipdms.gestaosugestoes.action.GestaoSugestoesFormAction"
		scope="singleton" >
		<property name="formObjectName" value="gestaoSugestoesFlowBean" />
		<property name="formObjectClass" value="com.sinfic.ipdms.gestaosugestoes.instrucao.GestaoSugestoesFlowBean" />
		<property name="formObjectScope" value="FLOW" />
		<property name="validator">
			<bean class="com.sinfic.ipdms.gestaosugestoes.instrucao.GestaoSugestoesFlowValidator" abstract="false" scope="singleton" />
		</property>
	</bean>


</beans>