<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">
	
	
	<!-- ********************************************************************* -->  
	<!--  Collect ServicoOnline Stats                                          -->
	<!-- ********************************************************************* -->
	<bean id="collectServicoOnlineStats" class="com.sinfic.ipdms.services.stats.impl.CollectServicoOnlineStatsImpl">
		<constructor-arg ref="servicoOnlineStatRepository" />
		<constructor-arg ref="servicoOnlineRepository" />
		<constructor-arg ref="colaboradorExtendedRepository" />
		<constructor-arg ref="varianteRepository" />
		<constructor-arg ref="localSystemIdentifier" />
		<!-- 
			Add the remote nodes from where stats are extracted if needed. If the local node
			collect local stats only, this property doesn't need to be set.
		 -->
		<!--property name="remoteStatsExportServices">
			<list>
				<bean class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
					<property name="serviceInterface" value="com.sinfic.ipdms.services.stats.ExportServicoOnlineStats" />
					<property name="serviceUrl" value="http://localhost:8080/IPDMSWeb/remoting/ExportServicoOnlineStats" />
				</bean>		
			</list>
		</property-->		
	</bean>
	
	<!-- ********************************************************************* -->  
	<!--  Extract Service Stats                                                -->
	<!-- ********************************************************************* -->
	<bean id="exportServicoOnlineStats" class="com.sinfic.ipdms.services.stats.impl.ExportServicoOnlineStatsImpl">
		<constructor-arg ref="servicoOnlineStatRepository" />
		<constructor-arg>
			<bean class="com.sinfic.ipdms.domain.business.config.DatabaseLocalSystemIdentifier">
				<constructor-arg ref="configEntryRepository" />
			</bean>
		</constructor-arg>
	</bean>
	
	<bean id="exportServicoOnlineStatsExporter" class="com.sinfic.ipdms.integration.spring.remoting.HttpInvokerServiceExporter">
		<property name="serviceInterface" value="com.sinfic.ipdms.services.stats.ExportServicoOnlineStats" />
		<property name="service" ref="exportServicoOnlineStats" />
	</bean>
	
	<!-- 
		Check web.xml configuration for:
		<servlet>
	    	<servlet-name>exportServicoOnlineStatsExporter</servlet-name>
	    	<servlet-class>org.springframework.web.context.support.HttpRequestHandlerServlet</servlet-class>
		</servlet>

		<servlet-mapping>
		    <servlet-name>exportServicoOnlineStatsExporter</servlet-name>
	    	<url-pattern>/remoting/ExportServicoOnlineStats</url-pattern>
		</servlet-mapping>
	 -->
	
</beans>
